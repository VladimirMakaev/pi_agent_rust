{
  "version": "1.0",
  "tool": "read",
  "description": "Conformance tests for the read tool",
  "cases": [
    {
      "name": "read_simple_file",
      "description": "Read a simple text file",
      "setup": [
        {"type": "create_file", "path": "test.txt", "content": "line1\nline2\nline3\nline4\nline5"}
      ],
      "input": {"path": "test.txt"},
      "expected": {
        "content_exact": "line1\nline2\nline3\nline4\nline5",
        "details_none": true
      }
    },
    {
      "name": "read_with_offset",
      "description": "Read file starting from a specific line",
      "setup": [
        {"type": "create_file", "path": "test.txt", "content": "line1\nline2\nline3\nline4\nline5"}
      ],
      "input": {"path": "test.txt", "offset": 3},
      "expected": {
        "content_exact": "line3\nline4\nline5",
        "details_none": true
      }
    },
    {
      "name": "read_with_limit",
      "description": "Read file with line limit",
      "setup": [
        {"type": "create_file", "path": "test.txt", "content": "line1\nline2\nline3\nline4\nline5"}
      ],
      "input": {"path": "test.txt", "limit": 2},
      "expected": {
        "content_exact": "line1\nline2\n\n[3 more lines in file. Use offset=3 to continue.]",
        "details_none": true
      }
    },
    {
      "name": "read_with_offset_and_limit",
      "description": "Read file with both offset and limit",
      "setup": [
        {"type": "create_file", "path": "test.txt", "content": "line1\nline2\nline3\nline4\nline5"}
      ],
      "input": {"path": "test.txt", "offset": 2, "limit": 2},
      "expected": {
        "content_exact": "line2\nline3\n\n[2 more lines in file. Use offset=4 to continue.]",
        "details_none": true
      }
    },
    {
      "name": "read_offset_out_of_bounds",
      "description": "Offset beyond EOF should error with an actionable message",
      "setup": [
        {"type": "create_file", "path": "test.txt", "content": "line1\nline2\nline3\nline4\nline5"}
      ],
      "input": {"path": "test.txt", "offset": 999},
      "expect_error": true,
      "error_contains": "Offset 999 is beyond end of file",
      "expected": {}
    },
    {
      "name": "read_nonexistent_file",
      "description": "Reading a nonexistent file should error",
      "input": {"path": "/nonexistent/path/file.txt"},
      "expect_error": true,
      "error_contains": "No such file",
      "expected": {}
    },
    {
      "name": "read_directory",
      "description": "Reading a directory should error",
      "setup": [
        {"type": "create_dir", "path": "mydir"}
      ],
      "input": {"path": "mydir"},
      "expect_error": true,
      "error_contains": "directory",
      "expected": {}
    },
    {
      "name": "read_empty_file",
      "description": "Read an empty file",
      "setup": [
        {"type": "create_file", "path": "empty.txt", "content": ""}
      ],
      "input": {"path": "empty.txt"},
      "expected": {
        "content_exact": "",
        "details_none": true
      }
    },
    {
      "name": "read_unicode_content",
      "description": "Read file with Unicode content",
      "setup": [
        {"type": "create_file", "path": "unicode.txt", "content": "Hello ä¸–ç•Œ\nã“ã‚“ã«ã¡ã¯\nğŸ‰ emoji"}
      ],
      "input": {"path": "unicode.txt"},
      "expected": {
        "content_exact": "Hello ä¸–ç•Œ\nã“ã‚“ã«ã¡ã¯\nğŸ‰ emoji",
        "details_none": true
      }
    }
  ]
}

{
  "schema": "pi.golden_corpus.v1",
  "scenario": "rpc_mode_sequential_commands",
  "surface": "rpc_mode",
  "description": "RPC mode script flow: handles multiple commands in one stdin stream with independent response envelopes",
  "cli_args": [
    "--mode", "rpc",
    "--provider", "anthropic",
    "--model", "claude-sonnet-4-5",
    "--api-key", "test-vcr-key",
    "--no-tools",
    "--no-extensions",
    "--no-skills",
    "--no-prompt-templates",
    "--no-themes",
    "--thinking", "off"
  ],
  "stdin": "{\"id\":\"cmd-rpc-3a\",\"type\":\"get_state\"}\n{\"id\":\"cmd-rpc-3b\",\"type\":\"not_a_real_command\"}\n",
  "env_overrides": {},
  "cassette": null,
  "expected": {
    "exit_code": 0,
    "stdout_contains": [
      "\"id\":\"cmd-rpc-3a\"",
      "\"command\":\"get_state\"",
      "\"success\":true",
      "\"id\":\"cmd-rpc-3b\"",
      "\"command\":\"not_a_real_command\"",
      "\"success\":false",
      "Unknown command: not_a_real_command"
    ],
    "stdout_not_contains": [],
    "stderr_not_contains": ["panic"]
  }
}
